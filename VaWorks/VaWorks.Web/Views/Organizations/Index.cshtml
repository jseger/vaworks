@model IEnumerable<VaWorks.Web.Data.Entities.Organization>

@{
    ViewBag.Title = "Organizations";
}

<h2>Organizations</h2>

<p>
    @Html.ActionLink("Add New Organization", "Create", null, new { @class = "btn btn-link" })
</p>

@helper ShowTree(IEnumerable<VaWorks.Web.Data.Entities.Organization> items, int level) {
    foreach (var item in items) {
        <ul>
            <li>
                @Html.ActionLink(item.Name, "Details", new { id = item.OrganizationId }, new { @class = "btn btn-link" })
            </li>
            @ShowTree(item.Children, level++)
        </ul>
    }
}

<div class="col-md-3 col-lg-3 tree">
    @ShowTree(Model, 0)
</div>

@section styles{
<link href="~/Content/tree.css" rel="stylesheet" />
    
    }